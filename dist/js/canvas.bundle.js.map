{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/image/orc.png","webpack:///./src/image/projectile.png","webpack:///./src/image/tower.png","webpack:///./src/image/towerDefenseMap.png","webpack:///./src/js/canvas.js","webpack:///./src/js/placementtile.js","webpack:///./src/js/waypoints.js"],"names":["canvas","document","querySelector","width","height","c","getContext","towerDefenseMap","Image","src","towerDefenseMapUrl","orcImage","orcUrl","towerImage","towerUrl","projectileImage","projectileUrl","placementtileData2D","i","placementtileData","length","push","slice","onload","animate","passedNum","placementtile","position","arguments","undefined","x","y","_classCallCheck","size","color","isOccupied","_createClass","key","value","draw","fillStyle","fillRect","update","mouse","enemy","wayPointsIndex","radis","heath","imageIndex","frame","drawImage","ydistance","wayPoints","xdistance","redian","Math","atan2","cos","sin","round","enemyArr","enemyCountNum","enemyIn","placementtileArr","forEach","column","row","animationId","requestAnimationFrame","clearRect","splice","cancelAnimationFrame","ele","style","display","placement","buildingArr","building","enemys","_loop","projecttile","projectTiles","distance","sqrt","console","log","enemyIndex","findIndex","addEventListener","event","activeTile","Building","window","clientX","clientY","center","index","_this","projectTile","velocity","radian"],"mappings":"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AAE,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAC9D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAC7D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAC9D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAC7D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAC7D,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAC9D,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAC7D,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACnDA,gFAAiB,E;;;;;;;;;;;;ACZhC;AAAA,IAAMiC,SAAS,GAAG,CACd;EACC,GAAG,EAAC,CAAC,GAAG;EACR,GAAG,EAAC;AACL,CAAC,EACD;EACC,GAAG,EAAC,GAAG;EACP,GAAG,EAAC;AACL,CAAC,EACD;EACC,GAAG,EAAC,GAAG;EACP,GAAG,EAAC;AACL,CAAC,EACD;EACC,GAAG,EAAC,GAAG;EACP,GAAG,EAAC;AACL,CAAC,EACD;EACC,GAAG,EAAC,GAAG;EACP,GAAG,EAAC;AACL,CAAC,EACD;EACC,GAAG,EAAC,GAAG;EACP,GAAG,EAAC;AACL,CAAC,EACD;EACC,GAAG,EAAC,GAAG;EACP,GAAG,EAAC;AACL,CAAC,EACD;EACC,GAAG,EAAC,IAAI;EACR,GAAG,EAAC;AACL,CAAC,EACD;EACC,GAAG,EAAC,IAAI;EACR,GAAG,EAAC;AACL,CAAC,EACD;EACC,GAAG,EAAC,IAAI;EACR,GAAG,EAAC;AACL,CAAC,CAAC;AACaA,wEAAS,E","file":"./js/canvas.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/canvas.js\");\n","export default __webpack_public_path__ + \"0a94e21d28cef22387a76d76febb0ed8.png\";","export default __webpack_public_path__ + \"67dcf961fda378063525f69cec6d00cb.png\";","export default __webpack_public_path__ + \"949bdb42e6390fb0fc08620fac021030.png\";","export default __webpack_public_path__ + \"beb4da6ad544978b3f43150181964be5.png\";","import towerDefenseMapUrl from '../image/towerDefenseMap.png'\r\nimport orcUrl from '../image/orc.png'\r\nimport towerUrl from '../image/tower.png'\r\nimport projectileUrl from '../image/projectile.png'\r\nimport wayPoints from './waypoints.js'\r\nimport placementtileData from './placementtile.js'\r\n\r\nconst canvas = document.querySelector('canvas')\r\ncanvas.width = 1280\r\ncanvas.height = 768\r\nconst c = canvas.getContext('2d')\r\n\r\nvar towerDefenseMap = new Image()\r\ntowerDefenseMap.src = towerDefenseMapUrl\r\n\r\nvar orcImage = new Image()\r\norcImage.src = orcUrl\r\n\r\nvar towerImage = new Image()\r\ntowerImage.src = towerUrl\r\n\r\nvar projectileImage = new Image()\r\nprojectileImage.src = projectileUrl\r\n\r\n\r\nconst placementtileData2D = []\r\nfor(var i=0;i<placementtileData.length;i=i+20){\r\n  placementtileData2D.push(placementtileData.slice(i,i+20));\r\n}\r\ntowerDefenseMap.onload = function() {\r\n  orcImage.onload = function() {\r\n    towerImage.onload = function() {\r\n      projectileImage.onload = function() {\r\n        animate()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar passedNum = 0\r\nclass placementtile{\r\n  constructor(position={x:0,y:0}){\r\n    this.position = position\r\n    this.size = 64\r\n    this.color = \"rgba(255,255,255,0.15)\"\r\n    this.isOccupied = false\r\n  }\r\n  draw() {\r\n    c.fillStyle=this.color\r\n    c.fillRect(this.position.x,this.position.y,this.size,this.size)\r\n  }\r\n\r\n  update(mouse) {\r\n\r\n    if(mouse.x>this.position.x && mouse.x<this.position.x+this.size\r\n      && mouse.y>this.position.y && mouse.y<this.position.y+this.size){\r\n        this.color = \"white\"\r\n    }else{\r\n      this.color = \"rgba(255,255,255,0.15)\"\r\n    }\r\n    this.draw()\r\n  }\r\n}\r\n\r\n\r\nclass enemy{\r\n  constructor(position={x:0,y:0}){\r\n    this.position = position\r\n    this.wayPointsIndex = 0\r\n    this.width = 100\r\n    this.height = 100\r\n    this.radis = 50\r\n    this.heath = 100\r\n    this.imageIndex = 0\r\n    this.frame = 0\r\n  }\r\n  draw() {\r\n    /*\r\n    c.beginPath()\r\n    c.arc(this.position.x,this.position.y,this.radis,0,Math.PI*2)\r\n    c.fillStyle = \"red\"\r\n    c.fill()\r\n    c.closePath()\r\n    */\r\n   if(this.frame%10==0){\r\n    this.imageIndex++;\r\n   }\r\n   this.frame++\r\n\r\n    c.drawImage(orcImage, this.imageIndex*orcImage.width/7,0,orcImage.width/7,79,\r\n    this.position.x, this.position.y, orcImage.width/7,79)\r\n\r\n    \r\n    if(this.imageIndex == 7){\r\n      this.imageIndex = 0\r\n    }\r\n\r\n    c.fillStyle = \"green\"\r\n    c.fillRect(this.position.x-this.radis,this.position.y-15-this.radis-15,this.width,20)\r\n    c.fillStyle = \"red\"\r\n    c.fillRect(this.position.x-this.radis+this.width,this.position.y-15-this.radis-15,-this.width*(1-this.heath/100),20)\r\n  }\r\n  update() {\r\n    this.draw();\r\n    const ydistance = wayPoints[this.wayPointsIndex].y-this.position.y;\r\n    const xdistance = wayPoints[this.wayPointsIndex].x-this.position.x; \r\n    var redian = Math.atan2(ydistance,xdistance);\r\n    this.position.x =  this.position.x+Math.cos(redian);\r\n    this.position.y =  this.position.y+Math.sin(redian);\r\n    if(Math.round(this.position.x) == Math.round(wayPoints[this.wayPointsIndex].x) &&  \r\n    Math.round(this.position.y) == Math.round(wayPoints[this.wayPointsIndex].y)&&this.wayPointsIndex<wayPoints.length-1){\r\n      this.wayPointsIndex++;\r\n    }\r\n  }\r\n}\r\nconst enemyArr = []\r\n\r\nvar enemyCountNum = 5\r\nfunction enemyIn(enemyCountNum){\r\n  for(var i=1;i<enemyCountNum;i++){\r\n    enemyArr.push(new enemy({x:-150*i,y:489}));\r\n  } \r\n}\r\nenemyIn(enemyCountNum)\r\n\r\nconst placementtileArr = []\r\nplacementtileData2D.forEach((column,y)=> {\r\n  column.forEach((row,x)=> {\r\n    if(row == 14){\r\n      placementtileArr.push(new placementtile({x:64*x,y:64*y}))\r\n    }\r\n  });\r\n});\r\nvar animationId\r\nfunction animate(){\r\n  animationId = requestAnimationFrame(animate)\r\n  c.clearRect(0,0,canvas.width,canvas.height)\r\n  c.drawImage(towerDefenseMap, 0, 0, canvas.width, canvas.height)\r\n  for(var i=0;i<enemyArr.length;i++){\r\n    enemyArr[i].update()\r\n\r\n    if(enemyArr[i].position.x>canvas.width){\r\n      enemyArr.splice(i,1)\r\n      passedNum++\r\n      i--;\r\n    }\r\n  }\r\n  \r\n  if(passedNum >= 10 ){\r\n    cancelAnimationFrame(animationId);\r\n    var ele = document.querySelector(\"#gameOver\")\r\n    ele.style.display = \"flex\";\r\n  }\r\n  \r\n  if(enemyArr.length == 0 ){\r\n    enemyCountNum = enemyCountNum+5\r\n    enemyIn(enemyCountNum)\r\n  }\r\n  placementtileArr.forEach(placement => {\r\n    placement.update(mouse)\r\n  })\r\n  buildingArr.forEach(building => {\r\n    building.update()\r\n\r\n    if(building.enemys.length>0){\r\n\r\n      //碰撞检测\r\n      for(var i = 0;i<building.projectTiles.length;i++){\r\n        const projecttile = building.projectTiles[i]\r\n        var xdistance = projecttile.position.x  - projecttile.enemy.position.x;\r\n        var ydistance = projecttile.position.y  - projecttile.enemy.position.y;\r\n\r\n        var distance = Math.sqrt(xdistance*xdistance+ydistance*ydistance)\r\n        if(distance <= projecttile.radis + projecttile.enemy.radis){\r\n          building.projectTiles.splice(i,1)\r\n          i--\r\n          console.log(enemyArr)\r\n          projecttile.enemy.heath = projecttile.enemy.heath-20\r\n          if(projecttile.enemy.heath<=0){\r\n            const enemyIndex = enemyArr.findIndex(enemy=>{\r\n              return projecttile.enemy === enemy\r\n            })\r\n            if(enemyIndex>-1){\r\n              debugger\r\n              enemyArr.splice(enemyIndex,1)\r\n            }\r\n          }\r\n          console.log(enemyArr)\r\n        }else{\r\n          projecttile.update()\r\n        }\r\n      }\r\n\r\n    }\r\n  })\r\n}\r\n\r\nconst mouse = {\r\n  x:undefined,\r\n  y:undefined\r\n}\r\n\r\ncanvas.addEventListener('click',(event)=>{\r\n  if(activeTile && !activeTile.isOccupied){\r\n    buildingArr.push(new Building({x:activeTile.position.x,y:activeTile.position.y}))\r\n    activeTile.isOccupied = true\r\n  }\r\n})\r\n\r\nconst buildingArr = []\r\nvar activeTile\r\nwindow.addEventListener('mousemove',(event)=>{\r\n  mouse.x = event.clientX;\r\n  mouse.y = event.clientY;\r\n  activeTile = null\r\n  for(var i=0;i<placementtileArr.length;i++){\r\n    if(mouse.x>placementtileArr[i].position.x && mouse.x<placementtileArr[i].position.x+placementtileArr[i].size\r\n      && mouse.y>placementtileArr[i].position.y && mouse.y<placementtileArr[i].position.y+placementtileArr[i].size){\r\n        activeTile = placementtileArr[i]\r\n        break\r\n    }\r\n  }\r\n})\r\nclass Building {\r\n  constructor(position={x:0,y:0}){\r\n    this.position = position\r\n    this.center = {\r\n      x:this.position.x+64,\r\n      y:this.position.y+32\r\n    }\r\n    this.projectTiles = [\r\n      \r\n    ]\r\n    this.radis = 200\r\n    //进入攻击范围的敌人\r\n    this.enemys = []\r\n    this.index = 500\r\n    this.imageIndex = 0\r\n  }\r\n  draw(){\r\n    /*\r\n    c.fillStyle='blue'\r\n    c.fillRect(this.position.x,this.position.y,128,64)\r\n    c.beginPath()\r\n    c.arc(this.center.x,this.center.y,this.radis,0,Math.PI*2)\r\n    c.fillStyle = \"rgba(0,0,255,0.1)\"\r\n    c.fill()\r\n    c.closePath()\r\n    */\r\n    c.drawImage(towerImage, this.imageIndex*towerImage.width/19,0,towerImage.width/19,144,\r\n    this.position.x, this.position.y, towerImage.width/19,144)\r\n    this.imageIndex++;\r\n    if(this.imageIndex == 19){\r\n      this.imageIndex = 0\r\n    }\r\n  }\r\n  update(){\r\n    this.draw()\r\n    //计算进入攻击范围的敌人\r\n    this.enemys = []\r\n    enemyArr.forEach(enemy =>{\r\n      var xdistance = this.center.x  - enemy.position.x;\r\n      var ydistance = this.center.y  - enemy.position.y;\r\n      var distance = Math.sqrt(xdistance*xdistance+ydistance*ydistance)\r\n      if(distance<=this.radis+enemy.radis){\r\n        this.enemys.push(enemy)\r\n      }\r\n      if(this.enemys.length>0){\r\n        //this.projectTiles = []\r\n       if(this.index % 500 == 0){\r\n          this.projectTiles.push(new projectTile({x:this.center.x,y:this.center.y},this.enemys[0]))\r\n          this.index = 500\r\n        }\r\n      }\r\n      this.index++\r\n    })\r\n    console.log(this.enemys)   \r\n  }\r\n}\r\nclass projectTile{\r\n  constructor(position={x:0,y:0},enemy){\r\n    this.position = position\r\n    this.velocity = {\r\n      x:0,\r\n      y:0\r\n    }\r\n    this.enemy = enemy\r\n    this.radis = 10\r\n    this.index = 0\r\n  }\r\n  draw(){\r\n    /*\r\n    c.beginPath()\r\n    c.arc(this.position.x,this.position.y,this.radis,0,Math.PI*2)\r\n    c.fillStyle = \"orange\"\r\n    c.fill()\r\n    */\r\n    c.drawImage(projectileImage, \r\n    this.position.x, this.position.y, projectileImage.width,projectileImage.height)\r\n  }\r\n  update(){\r\n      this.draw()\r\n      var radian = Math.atan2(this.enemy.position.y-this.position.y,this.enemy.position.x-this.position.x)\r\n      this.velocity.x = Math.cos(radian)\r\n      this.velocity.y = Math.sin(radian)\r\n      this.position.x = this.position.x+this.velocity.x\r\n      this.position.y = this.position.y+this.velocity.y\r\n  }\r\n}","const placementtileData = [0, 14, 0, 14, 0, 14, 0, 14, 0, 14, 0, 14, 0, 14, 0, 0, 0, 0, 0, 0,\r\n    0, 14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 0, 0,\r\n    0, 14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 0, 0,\r\n    0, 14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 0, 0,\r\n    0, 14, 0, 0, 0, 0, 14, 0, 14, 0, 0, 0, 0, 14, 0, 0, 0, 0, 0, 0,\r\n    0, 14, 0, 0, 0, 0, 14, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 0, 0,\r\n    0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 13, 0, 14, 0, 0, 0, 0, 14, 0,\r\n    0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 14, 0,\r\n    0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 0, 0, 14, 0, 0, 0, 0, 14, 0,\r\n    0, 0, 14, 0, 14, 0, 14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0,\r\n    0, 0, 14, 0, 14, 0, 14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n    0, 0, 14, 0, 14, 0, 14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\nexport default placementtileData;","const wayPoints = [ \r\n    {\r\n     \"x\":-117,\r\n     \"y\":489\r\n    }, \r\n    {\r\n     \"x\":286,\r\n     \"y\":487\r\n    }, \r\n    {\r\n     \"x\":290,\r\n     \"y\":162\r\n    }, \r\n    {\r\n     \"x\":737,\r\n     \"y\":166\r\n    }, \r\n    {\r\n     \"x\":738,\r\n     \"y\":418\r\n    }, \r\n    {\r\n     \"x\":606,\r\n     \"y\":414\r\n    }, \r\n    {\r\n     \"x\":607,\r\n     \"y\":674\r\n    }, \r\n    {\r\n     \"x\":1057,\r\n     \"y\":679\r\n    }, \r\n    {\r\n     \"x\":1055,\r\n     \"y\":286\r\n    }, \r\n    {\r\n     \"x\":1348,\r\n     \"y\":290\r\n    }]\r\n    export default wayPoints;"],"sourceRoot":""}